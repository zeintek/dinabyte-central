<div class="dashboard-container">
    <h1>Dashboard</h1>
    
    <div class="loading-shade" *ngIf="isLoading">
      <mat-spinner diameter="50"></mat-spinner>
    </div>
    
    <div class="dashboard-stats" *ngIf="!isLoading">
      <mat-card class="stat-card">
        <mat-card-content>
          <div class="stat-icon">
            <mat-icon>people</mat-icon>
          </div>
          <div class="stat-details">
            <h2>{{ totalClients }}</h2>
            <p>Clientes Totales</p>
          </div>
        </mat-card-content>
      </mat-card>
      
      <mat-card class="stat-card">
        <mat-card-content>
          <div class="stat-icon">
            <mat-icon>check_circle</mat-icon>
          </div>
          <div class="stat-details">
            <h2>{{ activeClients }}</h2>
            <p>Clientes Activos</p>
          </div>
        </mat-card-content>
      </mat-card>
      
      <mat-card class="stat-card">
        <mat-card-content>
          <div class="stat-icon">
            <mat-icon>block</mat-icon>
          </div>
          <div class="stat-details">
            <h2>{{ suspendedClients }}</h2>
            <p>Clientes Suspendidos</p>
          </div>
        </mat-card-content>
      </mat-card>
      
      <mat-card class="stat-card">
        <mat-card-content>
          <div class="stat-icon">
            <mat-icon>router</mat-icon>
          </div>
          <div class="stat-details">
            <h2>{{ connectedRouters }}/{{ totalRouters }}</h2>
            <p>Routers Conectados</p>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
    
    <div class="dashboard-charts" *ngIf="!isLoading">
      <mat-card class="chart-card">
        <mat-card-header>
          <mat-card-title>Clientes por Plan</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="chart-container">
            <canvas baseChart
              [data]="clientsByPlan"
              [type]="'pie'"
              [options]="{ responsive: true }"
              [labels]="clientsByPlan.map(item => item.name)">
            </canvas>
          </div>
        </mat-card-content>
      </mat-card>
      
      <mat-card class="chart-card">
        <mat-card-header>
          <mat-card-title>Clientes por Tipo de Conexión</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="chart-container">
            <canvas baseChart
              [data]="clientsByConnectionType"
              [type]="'doughnut'"
              [options]="{ responsive: true }"
              [labels]="clientsByConnectionType.map(item => item.name)">
            </canvas>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
    
    <div class="dashboard-actions" *ngIf="!isLoading">
      <mat-card>
        <mat-card-header>
          <mat-card-title>Acciones Rápidas</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="action-buttons">
            <button mat-raised-button color="primary" [routerLink]="['/admin/clients/new']">
              <mat-icon>person_add</mat-icon> Nuevo Cliente
            </button>
            <button mat-raised-button color="accent" [routerLink]="['/admin/service-plans/new']">
              <mat-icon>add_box</mat-icon> Nuevo Plan
            </button>
            <button mat-raised-button color="warn" [routerLink]="['/admin/mikrotik/routers/new']">
              <mat-icon>router</mat-icon> Nuevo Router
            </button>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </div>